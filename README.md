# flowcontrol

## Amazon Q

Amazon Qは、AWSが提供するAIアシスタントで、開発者の生産性向上を支援します。コード生成、コード補完、デバッグ支援、質問応答などの機能を提供し、開発プロセス全体をサポートします。

### 利用コスト

Amazon Qには複数のエディションがあり、それぞれ異なる料金体系があります：

1. **Amazon Q Developer**
   - 開発者向けの基本機能を提供する無料版
   - コード補完、コード生成、コードの説明などの基本機能が含まれます
   - AWS Management Consoleでの基本的な質問応答も無料

2. **Amazon Q Developer Pro**
   - 月額19ドル/開発者
   - より高度なコード生成、コード変換、セキュリティスキャンなどの機能
   - カスタマイズ可能なコーディングスタイル

3. **Amazon Q Business**
   - 月額20ドル/ユーザー
   - ビジネスデータに接続可能
   - 企業向けの高度な機能

4. **Amazon Q Apps**
   - 利用量に基づく料金体系
   - アプリケーション構築と実行に対して課金

詳細な料金情報は[AWS公式サイト](https://aws.amazon.com/jp/q/pricing/)で確認できます。

## CloudFront ビヘイビア優先順位スイッチャー

このプロジェクトは、CloudFrontディストリビューションのビヘイビア優先順位を動的に変更するLambda関数を提供します。メンテナンスモード（Sorry画面）の有効化を自動化することができます。

### 機能概要

- CloudFrontディストリビューションに登録されたメンテナンス用ビヘイビアの優先順位を動的に変更
- メンテナンス開始時にはSorryページ用ビヘイビアを最上位（優先度0）に設定
- us-east-1リージョンのLambda関数で実装

### 使用方法

1. 環境変数を設定してデプロイ:
   - `DIST_ID`: CloudFrontディストリビューションID
   - `SORRY_PATTERN`: メンテナンス用PathPattern（例: `*`または`maintenance/*`）

2. Terraformでデプロイ:
   ```
   terraform init
   terraform apply
   ```

3. Lambda関数を実行してビヘイビア優先順位を変更

### エラー処理

- 優先度の衝突を自動的に解決（同一値の場合は+1）